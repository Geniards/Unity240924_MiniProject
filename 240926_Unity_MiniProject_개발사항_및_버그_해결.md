# <UnityMiniProject 진행내역 및 버그사항 해결>
## 1일차
### 한줄평 
- 프로젝트 시작
---
* 진행 내역
  * SRPG의 틀을 잡고 진행하려고 함.

  * 마우스 이벤트인 IPoint Interface를 활용하여 턴제 이동 및 상황을 관리하려고 진행.

  * 마우스로 맵을 이동과 영역 밖으로 안나가게끔 제한.
  * 캐릭터 UI 및 타일 
  UI생성

* 버그내역
  * 해당 타일에서의 정보 UI부분에 대해서 잘나타나지 않음. 
  * 마우스 이벤트에 대해서 제대로 동작이 안됨.

* 해결방법
  * 마우스 이벤트에 대해서 잘못 이해 및 조건을 다시 걸어둠으로 진행이 완료됨.
---

## 2일차 
### 한줄평 
- SRPG에 대해서 간단하게 생각함...
---
* 진행내역
  * 턴제 시스템에 대한 이해 및 진행 방법 설정.

  * 유닛의 이동 진행.
  >  * 처음에 DFS로 이동가능범위를 탐색을 진행했다가 동작이 이상하게 작동하는것을 알게되고나서 BFS로 진행.
  > * (순간 두 방식에 대해서 잘못 이해하고 있었음. 탐색에 대해서 다시 정리해둘 필요 있음.)
  >  * BFS로 탐지한 거리를 이동가능한 구역으로 설정.
  
  * 턴 종료 버튼과 UI연결.

* 버그내역
  * 캐릭터 클릭하여 선택시 이동가능 범위의 탐색과 이동하는 범위의 오차가 발생.

* 해결방법
  * 마우스의 화면상의 좌표와 타일맵의 좌표간의 차이에 대해서 찾고 다시 알맞는 값으로 변경으로 해당 위치를 조정.

---

## 3일 차
### 한줄평 
- 생각보다 SRPG쪽 자료가 적음을 파악 및 진행시 세세한 부분 조정이 필요
---
* 진행내역
  * SRPG관련 블로그 참고 및 그리드 시스템에 대해서 파악.
     * 참고사이트 - https://theliquidfire.com/2015/05/04/tactics-rpg-series-intro/

  * 다음 진행과정인 공격부분에 대해서 잠시 보류하기로 결정함.
    >* 이동을 진행하면서 이동 진행 및 버그가 발생하고 있던 상황이었음.
    >* 이대로 들고 가면 나중에 터지면 감당을 못할듯하다고 생각이 들어서 진행하던 과정을 잠시 보류하고 그리드 시스템에 대해서 다시 정리 후 진행하기로 함.

  * 타일맵을 사용하고 있었지만 타일에 대해서 하나씩 다 깔는 것으로 진행.
    >* 타일마다 해당 타일의 정보가 들어있어야한다고 생각.
    >* 타일마다 이벤트 트리거를 부착하여 따로 이벤트트리거가 부착된 유닛만 이벤트를 진행하는 것이 아닌 해당 타일에서도 추후 이벤트상황이 발생 할 수 있도록 결정함.

  * 타일을 생성하는 로직과 해당 타일에 대한 정보를 담은 스크립트 작성.

  * 캐릭터 이동에 대해서 다시 작성.

  * 해당부분에 대해서 아직 정보가 없고 이해가 안되어서 블로그 및 관련 정보를 찾아보기로함.

* 버그내역
  * 캐릭터가 이동시 해당 정보를 타일에 넘겨주는 곳에서 문제가 발생한듯함.

  * 캐릭터가 이동을 했지만 정보가 원래 있던 타일에 남겨져 있음.
  
  * 이동 탐지 및 이동 로직의 타일의 정보를 잘못 전달로 인하여 이동에 문제가 발생.

* 해결방법
  * 이동로직의 재구성
  * 타일맵 생성과 타일 정보의 관계에 대해서 관련 자료 찾기 시작.

---

## 4일 차
### 한줄평 
- 처음부터 길을 잘못 들었음을 파악하는 날.
---
* 진행내역
  * 타일 시스템에 대해서 아직 완전히 이해를 못하여 진행부분에 대해서 차질이 생김.
  
  * 캐릭터의 이동에 대해서 진행.

* 버그내역
  * 캐릭터의 이동탐지 영역에 대해서 하이라이트를 구성하여 보여주기로 했는데, 탐지영역의 색이 변경이 안됨.


* 해결방법
  * 코드구성에서 원래있던 코드가 문제를 일으키는 것을 발견 후 타일의 상태를 해당 동작의 상태로 변경하고 타일의 상태에 따라 값을 입력하는 것으로 변경.

---

## 5일 차
### 한줄평 
- SRPG의 시스템에 대해서 이해하기 시작함
---
* 진행내역
  * 지금까지 진행하는 동안 코드 정리를 안했더니 중복기능 및 안쓰는 코드 발생하여 코드 정리

  * 턴매니저 세분화 진행.

  * 적군 행동패턴제작.

  * 애니메이션 및 공격 제작.

* 버그내역
  *  턴매니저로 적군이 아군에게 다가올수 있도록 하였는데 플레이어를 찾지 못하고 윗방향으로 움직임.
  >  * 아마 방향 탐색의 순서가 상하좌우라서 위로 먼저 움직이는듯함.
  
  * 이동가능 범위로 움직이기 보다는 BFS의 탐지 영역에서 A*로 찾는것을 진행했지만 코드가 잘 안어우러진듯함.

* 해결방법
  * BFS로 탐지한 후 조건에 대해서 잘못 연결되어 있었음.

  * 이동가능구역을 탐지 후 A*로 다시 최단 거리를 탐지 한 후 이동 가능구역의 타일들을 a*로 넘겨 준 후 중복되는 지역 중 가장 목적지와 가까운지역의 위치를 넘겨줌.

---

## 6일차
### 한줄평 
- 이번 과제때 완벽하게 제출에 대한 욕심을 버림. 
- 턴매니저 부분에 대해서 이해도가 전보다는 올라감.
---
* 진행내역
  * 진행이 내일 까지인데 진행이 더딤에 조급함이 발생함.

  * 턴매니저 세분화

  * 코드 정리
  
  * 맵 제작 및 저장 분러오기

* 버그내역
  * 요번 코드 정리때 마우스 이벤트 트리거 대신 다시 마우스의 입력 이벤트로 대체하였는데 입력 이벤트로 마우스 조작의 조건들이 너무 많아지기 시작함.
    >* 클릭시에 특정 타일 및 조건 등에서 UI 및 이벤트(공격, 이동, 취소, 맵 이동)의 행동들이 필요함때문에 마우스 입력만으로는 어떻게 진행할지에 고민하기 시작함.

  * 턴 매니저를 구성하는 부분에서 동작들이 엇긋나기 시작.
    > * 탐지영역이 생겼지만 탐지영역을 벗어나서 움직임.
    > * 해당 유닛이 있는 곳에 도달하면 안되는데 해당 유닛의 자리로 이동.



* 해결방법
  * 마우스의 부분은 어떻게 해결해야할지 아직 모르겠어서 일단 조건문들을 계속 조합해서 해결 중.
  
  * 턴 매니저 부분은 경우 코드 정리를 하면서 중복된 코드 및 기능들을 최우선으로 정리하면서 조금씩 해결되어짐.

  * 코드 정리 하면서 기능들을 최대한 한쪽으로 몰아서 해당 부분에 대해서는 각각의 스크립트들이 관리하기로 진행.

  ---

## 7일차
### 한줄평
 - 제출 실패.
 - 그냥 어디까지 만들 수 있나 시작하기로함.
 ---
* 진행내역
  *  오늘이 제출날인데 진행된 과정이 기본틀 잡힌 부분과 이동 밖에 없음.
  
  * 적군 행동패턴 및 아군 해동패턴 적용.

  * 공격 제작.

* 버그내역
  * 마우스 입력으로 제어하던 부분에 대해서 버그 발생. 
  
  * 특정 행동때 떠야할 UI들이 안뜨고 이동 및 공격 방향에 대한 하이라이트가 생성 안되거나 생성 후 사라지지 않음.

* 해결방법 
  * 어제부터 생각하던 마우스부분에 상태패턴을 적용하여 해당 부분에 대한 문제점을 다 해결함. 
    > * 해당 상태에서 마우스 클릭의 조건을 줌으로써 빠르게 구분이 가능해짐.
    > * 처음에 타일과 턴제 시스템의 이해하는 것에 갇혀서 입력부분에 대해서 마우스 이벤트만으로 충분히 진행이 되었기에 상태 패턴을 적용에 대해서 생각을 못함.

---

## 8일차
### 한출평
---
* 작업내역
  * 적군의 행동패턴 조정 및 생성

  * 이동 및 선택 버그 수정 

* 버그내역
  * 아군턴에서 이동을 하고 종료가 되었을때 재이동이 가능한 부분.

  * 공격으로 마무리시 아군이 공격하고 있는 도중에 적들의 행동을 실행하는 부분.

  * 적이 죽고 나서 해당 타일에 정보를 남겨두고 있던 부분.

* 해결방법 
  * 턴 종료 필드를 생성 후 적용시킴.

  * 종료 조건을 액션 UI의 Exit버튼에서 진행 및 공격이 다 끝나고 턴을 넘겨줄때 종료되는 조건을 넣어줌.

  * 적이 죽고 삭제될때 해당 정보를 리셋 시키고 죽도록 코드 정리.
